# React Video Surveillance —Å–∏—Å—Ç–µ–º–∞ —Å SentryShot –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏—è —Å –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å SentryShot backend –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞–º–µ—Ä –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ —Ä–∞–±–æ—Ç—ã —Å –∞—Ä—Ö–∏–≤–Ω—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- **–ü–æ—Ç–æ–∫–æ–≤–æ–µ –≤–∏–¥–µ–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** —á–µ—Ä–µ–∑ HLS —Å –Ω–∏–∑–∫–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- **–ê—Ä—Ö–∏–≤–Ω—ã–µ –∑–∞–ø–∏—Å–∏** —Å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –∏ –ø–æ–∏—Å–∫–æ–º
- **–ú—É–ª—å—Ç–∏–∫–∞–º–µ—Ä–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** —Å –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π —Å–µ—Ç–∫–æ–π
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** —á–µ—Ä–µ–∑ SentryShot Basic Auth
- **Responsive –¥–∏–∑–∞–π–Ω** –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π —Ç–∞–π–º–ª–∞–π–Ω** –¥–ª—è —Ç–æ—á–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ –∞—Ä—Ö–∏–≤—É
- **–û–±—Ä–µ–∑–∫–∞ –≤–∏–¥–µ–æ** —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤
- **–ó–∞–∫–ª–∞–¥–∫–∏ –∏ —Å–æ–±—ã—Ç–∏—è** –Ω–∞ —Ç–∞–π–º–ª–∞–π–Ω–µ
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ª–æ–∫–∞—Ü–∏—è–º –∏ –∫–∞–º–µ—Ä–∞–º**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** –ø—Ä–∏ —Å–±–æ—è—Ö —Å–µ—Ç–∏
- **–ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
src/
‚îú‚îÄ‚îÄ api/                    # API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SentryShot
‚îÇ   ‚îú‚îÄ‚îÄ sentryshot.ts      # –û—Å–Ω–æ–≤–Ω–æ–π API –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ archiveAPI.ts      # API –¥–ª—è –∞—Ä—Ö–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ playerSlice.ts     # –°–ª–∞–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–µ–µ—Ä–æ–º
‚îú‚îÄ‚îÄ components/            # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ ArchiveFilters/    # –§–∏–ª—å—Ç—Ä—ã –¥–ª—è –∞—Ä—Ö–∏–≤–∞
‚îÇ   ‚îú‚îÄ‚îÄ Camera/            # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∫–∞–º–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ ScalableTimeline/  # –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π —Ç–∞–π–º–ª–∞–π–Ω
‚îÇ   ‚îú‚îÄ‚îÄ EventsSearch/      # –ü–æ–∏—Å–∫ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ video/             # –í–∏–¥–µ–æ–ø–ª–µ–µ—Ä—ã
‚îú‚îÄ‚îÄ constants/             # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –º–∞–ø–ø–∏–Ω–≥–∏
‚îÇ   ‚îî‚îÄ‚îÄ locationMapping.ts # –ú–∞–ø–ø–∏–Ω–≥ –ª–æ–∫–∞—Ü–∏–π –∫–∞–º–µ—Ä
‚îú‚îÄ‚îÄ store/                 # Zustand state management
‚îÇ   ‚îî‚îÄ‚îÄ useStore.ts        # –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
‚îú‚îÄ‚îÄ types/                 # –¢–∏–ø—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îÇ   ‚îî‚îÄ‚îÄ sentryshot.d.ts    # –¢–∏–ø—ã –¥–ª—è SentryShot API
‚îî‚îÄ‚îÄ utils/                 # –£—Ç–∏–ª–∏—Ç—ã
    ‚îú‚îÄ‚îÄ dateHelpers.ts     # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–∞–º–∏
    ‚îú‚îÄ‚îÄ recordingHelpers.ts # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–ø–∏—Å—è–º–∏
    ‚îî‚îÄ‚îÄ streamerAdapter.ts # –ê–¥–∞–ø—Ç–µ—Ä –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ –≤–∏–¥–µ–æ
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js 18+
- npm/yarn
- SentryShot Backend Server (v2.0+)
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π HLS

### SentryShot Backend
- **–í–µ—Ä—Å–∏—è**: 2.0 –∏–ª–∏ –≤—ã—à–µ
- **–ü–æ—Ä—Ç—ã**: 2020 (HTTP) / 2021 (HTTPS)
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: Basic Auth –≤–∫–ª—é—á–µ–Ω–∞
- **API**: REST API –≤–∫–ª—é—á–µ–Ω
- **–ü–æ—Ç–æ–∫–æ–≤–æ–µ –≤–∏–¥–µ–æ**: HLS –≤–∫–ª—é—á–µ–Ω

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository-url>
cd askr-video

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ò–ª–∏ —Å yarn
yarn install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SentryShot Backend

#### 2.1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ SentryShot

```bash
# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ SentryShot
curl -L https://codeberg.org/SentryShot/sentryshot/releases/latest/download/sentryshot-linux-amd64 -o sentryshot
chmod +x sentryshot

# –ò–ª–∏ —á–µ—Ä–µ–∑ Docker
docker pull codeberg.org/sentryshot/sentryshot:latest
```

#### 2.2 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `sentryshot.toml`

```toml
# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
[general]
logLevel = "info"
tempDir = "/tmp/sentryshot"

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
[web]
port = 2020
httpsPort = 2021
# –£–∫–∞–∂–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è HTTPS
# certFile = "/path/to/cert.pem"
# keyFile = "/path/to/key.pem"

# –í–∫–ª—é—á–µ–Ω–∏–µ API
[api]
enabled = true

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
[auth]
method = "basic"

# –°–æ–∑–¥–∞–Ω–∏–µ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
[[accounts]]
id = "admin"
username = "admin"
password = "your_secure_password"
admin = true

# –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–º–µ—Ä—ã
[[monitors]]
id = "camera1"
name = "–ì–ª–∞–≤–Ω–∞—è –∫–∞–º–µ—Ä–∞"
enable = true

[monitors.source]
type = "rtsp"
main = "rtsp://192.168.1.100:554/stream1"
sub = "rtsp://192.168.1.100:554/stream2"  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

# –í–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏
[monitors.recorder]
enable = true
videoDuration = 60  # –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–æ–≤ –≤ –º–∏–Ω—É—Ç–∞—Ö

# –í–∫–ª—é—á–µ–Ω–∏–µ HLS —Å—Ç—Ä–∏–º–∏–Ω–≥–∞
[monitors.hls]
enable = true
segmentDuration = 4
```

#### 2.3 –ó–∞–ø—É—Å–∫ SentryShot

```bash
# –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫
./sentryshot -config sentryshot.toml

# –ò–ª–∏ —á–µ—Ä–µ–∑ Docker
docker run -d \
  --name sentryshot \
  -p 2020:2020 \
  -v $(pwd)/config:/config \
  -v $(pwd)/recordings:/recordings \
  codeberg.org/sentryshot/sentryshot:latest
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

#### 3.1 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local`:

```env
# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ SentryShot
VITE_SENTRYSHOT_URL=http://localhost:2020
VITE_SENTRYSHOT_USERNAME=admin
VITE_SENTRYSHOT_PASSWORD=your_secure_password

# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
VITE_NODE_ENV=development
```

#### 3.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `src/config/sentryshot.ts` –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫:

```typescript
export const customConfig: SentryShotConfig = {
  serverUrl: 'your-sentryshot-server.com',
  port: 2020,
  useHttps: false,
  
  streaming: {
    preferLowRes: false,
    maxBufferLength: 30,
    connectionTimeout: 10000,
    retryAttempts: 3
  },
  
  archive: {
    maxRangeDays: 30,
    pageSize: 50,
    enableCaching: true
  }
};
```

### 4. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
npm run build

# –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–±–æ—Ä–∫–∏
npm run preview
```

## üîç –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

### –ö–ª—é—á–µ–≤—ã–µ —Ç–∏–ø—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

#### Camera –∏ Monitor

```typescript
// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Camera (–±–µ–∑ –ø–æ–ª—è location)
export interface Camera {
  id: string;
  name: string;
  url: string;
  isActive: boolean;
  isArchiveMode?: boolean;
  archiveStartDate?: Date | null;
  archiveEndDate?: Date | null;
  enable?: boolean;
  alwaysRecord?: boolean;
  videoLength?: number;
  hasSubStream?: boolean;
}

// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Monitor (–∏–∑ SentryShot API)
export interface Monitor {
  id: string;
  name: string;
  enable: boolean;
  source: {
    rtsp: {
      protocol: 'TCP' | 'UDP';
      mainInput: string;
      subInput?: string;
    };
  };
  alwaysRecord: boolean;
  videoLength: number;
}
```

#### –õ–æ–∫–∞—Ü–∏–∏ –∏ –º–∞–ø–ø–∏–Ω–≥

```typescript
// –¢–∏–ø—ã –ª–æ–∫–∞—Ü–∏–π (–≤ useStore.ts)
export type LocationType =
  | 'street'       // –£–ª–∏—Ü–∞
  | 'house'        // –î–æ–º
  | 'elevator'     // –õ–∏—Ñ—Ç
  | 'utility'      // –ë—ã—Ç–æ–≤–∫–∞
  | 'security'     // –ö–æ–º–Ω–∞—Ç–∞ –æ—Ö—Ä–∞–Ω–Ω–∏–∫–∞
  | 'playground'   // –î–µ—Ç—Å–∫–∞—è –ø–ª–æ—â–∞–¥–∫–∞
  | 'parking'      // –ü–∞—Ä–∫–æ–≤–∫–∞
  | 'unknown';     // –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è

// –ú–∞–ø–ø–∏–Ω–≥ –ª–æ–∫–∞—Ü–∏–π (–≤ locationMapping.ts)
export const MONITOR_LOCATION_MAP: Record<string, LocationType> = {
  '1': 'street',
  '2': 'house',
  '3': 'playground',
  '4': 'elevator',
  '5': 'security',
  '6': 'parking',
  '7': 'utility',
  'monitor_1': 'street',
  'monitor_2': 'house',
  // ...
};

// –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –ª–æ–∫–∞—Ü–∏–∏ –ø–æ ID –º–æ–Ω–∏—Ç–æ—Ä–∞
export const getLocationForMonitor = (monitorId: string): LocationType => {
  return MONITOR_LOCATION_MAP[monitorId] || 'unknown';
};

// –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –ª–æ–∫–∞—Ü–∏–∏
export const getLocationNameForMonitor = (monitorId: string): string => {
  const location = getLocationForMonitor(monitorId);
  return locationNames[location];
};
```

#### –ó–∞–ø–∏—Å–∏ –∏ —Å–æ–±—ã—Ç–∏—è

```typescript
// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å RecordingInfo
export interface RecordingInfo {
  id: string;
  monitorId: string;
  monitorName: string;
  startTime: Date;  // –í—Å–µ–≥–¥–∞ Date, –Ω–µ string
  endTime: Date;    // –í—Å–µ–≥–¥–∞ Date, –Ω–µ string
  duration: number;
  fileUrl: string;
  fileSize?: number;
  thumbnailUrl?: string;
}

// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å ArchiveEvent
export interface ArchiveEvent {
  id: string;
  monitorId: string;
  timestamp: Date;  // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è timestamp –≤–º–µ—Å—Ç–æ time
  type: 'motion' | 'object' | 'alarm' | 'custom';
  label: string;
  confidence: number;
  duration?: number;
  data?: any;
  color: string;
}
```

### –†–∞–±–æ—Ç–∞ —Å –ª–æ–∫–∞—Ü–∏—è–º–∏

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Ä–∞–±–æ—Ç–µ —Å –ª–æ–∫–∞—Ü–∏—è–º–∏ –∫–∞–º–µ—Ä. –í–º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–∫–∞—Ü–∏–∏ –∫–∞–∫ —Å–≤–æ–π—Å—Ç–≤–∞ –æ–±—ä–µ–∫—Ç–∞ Camera, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `getLocationForMonitor(monitorId)` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ª–æ–∫–∞—Ü–∏–∏ –ø–æ ID –∫–∞–º–µ—Ä—ã/–º–æ–Ω–∏—Ç–æ—Ä–∞.

#### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö:

```typescript
// –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏ –∫–∞–º–µ—Ä—ã
import { getLocationForMonitor } from '../../constants/locationMapping';

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
const location = getLocationForMonitor(camera.id);

// –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ª–æ–∫–∞—Ü–∏–∏
import { getLocationNameForMonitor } from '../../constants/locationMapping';

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
<span>{getLocationNameForMonitor(camera.id)}</span>
```

#### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–∞–º–µ—Ä –ø–æ –ª–æ–∫–∞—Ü–∏—è–º:

```typescript
// –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ª–æ–∫–∞—Ü–∏–π
const availableLocations = Array.from(
  new Set(cameras.map(camera => getLocationForMonitor(camera.id)))
) as LocationType[];

// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–∞–º–µ—Ä –ø–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º –ª–æ–∫–∞—Ü–∏—è–º
const filteredCameras = selectedLocations.length > 0
  ? cameras.filter(camera => selectedLocations.includes(getLocationForMonitor(camera.id)))
  : cameras;
```

### –†–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏

–í—Å–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–ª—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ `RecordingInfo` –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–∏–ø `Date`, –∞ –Ω–µ `string`. –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ—Ç API, —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–∞—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ –æ–±—ä–µ–∫—Ç—ã Date:

```typescript
// –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –∏–∑ API
export const convertRecordingFromAPI = (apiRecording: any): RecordingInfo => {
  return {
    ...apiRecording,
    startTime: new Date(apiRecording.startTime),
    endTime: new Date(apiRecording.endTime),
    location: getLocationForMonitor(apiRecording.monitorId)
  };
};
```

## üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è

| –ö–ª–∞–≤–∏—à–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|----------|
| `–ü—Ä–æ–±–µ–ª` | –ü–∞—É–∑–∞/–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ |
| `‚Üê` | –ù–∞–∑–∞–¥ 10 —Å–µ–∫—É–Ω–¥ |
| `‚Üí` | –í–ø–µ—Ä–µ–¥ 10 —Å–µ–∫—É–Ω–¥ |
| `Shift + ‚Üê/‚Üí` | –ù–∞–∑–∞–¥/–í–ø–µ—Ä–µ–¥ 1 –º–∏–Ω—É—Ç–∞ |
| `C` | –†–µ–∂–∏–º –æ–±—Ä–µ–∑–∫–∏ –≤–∏–¥–µ–æ |
| `M` | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–∞—Ä–∫–µ—Ä –Ω–∞—á–∞–ª–∞ |
| `N` | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–∞—Ä–∫–µ—Ä –∫–æ–Ω—Ü–∞ |
| `Esc` | –í—ã—Ö–æ–¥ –∏–∑ —Ä–µ–∂–∏–º–∞ –æ–±—Ä–µ–∑–∫–∏ |

### –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É

1. **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**: –°–µ—Ç–∫–∞ –∫–∞–º–µ—Ä –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
2. **–ê—Ä—Ö–∏–≤**: –ü–æ–∏—Å–∫ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø–∏—Å–µ–π
3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

## üîç –ü–æ–∏—Å–∫ –ø–æ –∞—Ä—Ö–∏–≤—É

### –§–∏–ª—å—Ç—Ä—ã
- **–í—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω**: –û—Ç/–î–æ —Å –±—ã—Å—Ç—Ä—ã–º–∏ –ø—Ä–µ—Å–µ—Ç–∞–º–∏
- **–õ–æ–∫–∞—Ü–∏–∏**: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—é –∫–∞–º–µ—Ä
- **–ö–∞–º–µ—Ä—ã**: –í—ã–±–æ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–∞–º–µ—Ä
- **–°–æ–±—ã—Ç–∏—è**: –ü–æ–∏—Å–∫ –ø–æ –¥–µ—Ç–µ–∫—Ü–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è/–æ–±—ä–µ–∫—Ç–æ–≤

### –ë—ã—Å—Ç—Ä—ã–µ –ø—Ä–µ—Å–µ—Ç—ã
- –ü–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞
- –ü–æ—Å–ª–µ–¥–Ω—è—è –Ω–µ–¥–µ–ª—è

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

**–°–∏–º–ø—Ç–æ–º**: "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å SentryShot
curl -u admin:password http://localhost:2020/api/monitors

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ SentryShot
docker logs sentryshot-backend
```

**–°–∏–º–ø—Ç–æ–º**: "–ù–µ—Ç –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–º–µ—Ä—ã
curl -u admin:password http://localhost:2020/api/monitors

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ RTSP –ø–æ—Ç–æ–∫ –Ω–∞–ø—Ä—è–º—É—é
ffplay rtsp://admin:password@192.168.1.100:554/stream
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–∏–ø–∞–º–∏ –∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π

**–û—à–∏–±–∫–∏ —Å —Ç–∏–ø–∞–º–∏ Date/string**:
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–æ–ª—è `startTime` –∏ `endTime` –≤ `RecordingInfo` –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–∏–ø `Date`
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–æ–∫-–¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—ä–µ–∫—Ç—ã Date –Ω–∞–ø—Ä—è–º—É—é, –±–µ–∑ –≤—ã–∑–æ–≤–∞ `.toISOString()`

**–û—à–∏–±–∫–∏ —Å –ª–æ–∫–∞—Ü–∏—è–º–∏ –∫–∞–º–µ—Ä**:
- –ù–µ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ `camera.location` –Ω–∞–ø—Ä—è–º—É—é, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `getLocationForMonitor(camera.id)`
- –î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –ª–æ–∫–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `getLocationNameForMonitor(camera.id)`

**–û—à–∏–±–∫–∏ —Å null/undefined**:
- –î–æ–±–∞–≤–ª—è–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ null/undefined –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏:
```typescript
// –ü—Ä–∏–º–µ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
{activeRecording && timelineVisibleRange && (
  <div style={{
    left: `${((activeRecording.startTime.getTime() + (clipStart || 0) * 1000 - timelineVisibleRange.start.getTime()) /
      (timelineVisibleRange.end.getTime() - timelineVisibleRange.start.getTime())) * 100}%`
  }}/>
)}
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

**–í—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU/–ø–∞–º—è—Ç–∏**:
- –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–∞–º–µ—Ä
- –í–∫–ª—é—á–∏—Ç–µ `preferLowRes: true` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ SentryShot

**–ó–∞–¥–µ—Ä–∂–∫–∏ –≤ –ø–æ—Ç–æ–∫–µ**:
- –£–º–µ–Ω—å—à–∏—Ç–µ `maxBufferLength` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–µ—Ç–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–≤–æ–¥–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –∫–∞–º–µ—Ä

### –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

```bash
# –õ–æ–≥–∏ SentryShot
docker logs -f sentryshot-backend

# –õ–æ–≥–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–≤ –±—Ä–∞—É–∑–µ—Ä–µ)
# –û—Ç–∫—Ä–æ–π—Ç–µ DevTools -> Console

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API –Ω–∞–ø—Ä—è–º—É—é
curl -u admin:password \
  -H "Content-Type: application/json" \
  http://localhost:2020/api/monitors
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

1. **HTTPS**: –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
```toml
[web]
httpsPort = 2021
certFile = "/path/to/cert.pem"
keyFile = "/path/to/key.pem"
```

2. **–°–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
3. **–§–∞–π—Ä–≤–æ–ª**: –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Ä—Ç–∞–º SentryShot
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ SentryShot –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ reverse proxy (Nginx)

```nginx
server {
    listen 443 ssl;
    server_name surveillance.yourdomain.com;
    
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    
    # Frontend
    location / {
        proxy_pass http://localhost:80;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    
    # SentryShot API
    location /api/ {
        proxy_pass http://localhost:2020/api/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    
    # SentryShot Streams
    location /stream/ {
        proxy_pass http://localhost:2020/stream/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_buffering off;
    }
}
```

## üìù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- `src/api/` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SentryShot API
- `src/components/` - React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `src/constants/` - –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –º–∞–ø–ø–∏–Ω–≥–∏
- `src/store/` - Zustand state management
- `src/utils/` - –£—Ç–∏–ª–∏—Ç—ã –∏ —Ö–µ–ª–ø–µ—Ä—ã

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–∞–º–µ—Ä

1. –î–æ–±–∞–≤—å—Ç–µ –∫–∞–º–µ—Ä—É –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é SentryShot
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ SentryShot
3. –ö–∞–º–µ—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–∏—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ª–æ–∫–∞—Ü–∏–π

1. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —Ç–∏–ø –ª–æ–∫–∞—Ü–∏–∏ –≤ `LocationType` –≤ `useStore.ts`
2. –î–æ–±–∞–≤—å—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏ –≤ `locationNames` –≤ `useStore.ts`
3. –î–æ–±–∞–≤—å—Ç–µ –º–∞–ø–ø–∏–Ω–≥ ID –º–æ–Ω–∏—Ç–æ—Ä–∞ –∫ –ª–æ–∫–∞—Ü–∏–∏ –≤ `MONITOR_LOCATION_MAP` –≤ `locationMapping.ts`

```typescript
// –í useStore.ts
export type LocationType =
  | 'street'
  | 'house'
  // ...
  | 'new_location';  // –ù–æ–≤–∞—è –ª–æ–∫–∞—Ü–∏—è

export const locationNames: Record<LocationType, string> = {
  // ...
  new_location: '–ù–æ–≤–∞—è –ª–æ–∫–∞—Ü–∏—è'
};

// –í locationMapping.ts
export const MONITOR_LOCATION_MAP: Record<string, LocationType> = {
  // ...
  'monitor_new': 'new_location'
};
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏

–î–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –±–∞–Ω–¥–ª–∞ –∏ —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –Ω—É–∂–Ω—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ:
```javascript
const SomeComponent = React.lazy(() => import('./SomeComponent'));
```

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä—É—á–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —á–∞–Ω–∫–æ–≤ —á–µ—Ä–µ–∑ `build.rollupOptions.output.manualChunks` –≤ vite.config.js:
```javascript
// vite.config.js
export default defineConfig({
  // ...
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['react', 'react-dom', 'zustand'],
          player: ['hls.js'],
          ui: ['./src/components/layout']
        }
      }
    }
  }
});
```

### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `src/App.css`:

```css
:root {
  --primary-color: #D3544A;    /* –û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç */
  --color-main2: #4175D4;      /* –í—Ç–æ—Ä–∏—á–Ω—ã–π —Ü–≤–µ—Ç */
  --text-color: #333;          /* –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
  --light-bg: #F2F3F7;         /* –°–≤–µ—Ç–ª—ã–π —Ñ–æ–Ω */
}
```

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏
- [SentryShot Documentation](https://codeberg.org/SentryShot/sentryshot)
- [React Documentation](https://react.dev)
- [HLS.js Documentation](https://github.com/video-dev/hls.js/)
- [TypeScript Documentation](https://www.typescriptlang.org/docs/)

### –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
–ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å–æ–∑–¥–∞–π—Ç–µ issue —Å —É–∫–∞–∑–∞–Ω–∏–µ–º:
- –í–µ—Ä—Å–∏–∏ SentryShot
- –í–µ—Ä—Å–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- –õ–æ–≥–æ–≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –¥–µ—Ç–∞–ª–∏ –≤ —Ñ–∞–π–ª–µ LICENSE

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –î–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–ª—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ –≤–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏—è.
